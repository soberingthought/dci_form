<html>
  <head>
    <title>DCI Auto-form v0.0.0.0.1</title>
    <style>
      .preview {
        border: thin solid black;
        padding: 1em;
        background-color: #eeeeee;
      }
    </style>
  </head>
  <body>
    <h2>
      Daily Check-In Formatting Formy Form
    </h2>
    <p>
    This little form helps make it easy to setup your DCI post.
    </p>
    <p>
    Just add your personal message in the text area below and we'll fill out the preamble for you.
    </p>
    <p>
    When you're happy with how everythng looks, just click the "Copy It!" button and it will be saved to your computer's clipboard.  Then just paste that text into your Reddit post for the DCI.
    </p>
    <textarea id="user_text" rows=10 cols=80>Type your _optionally_ markdown-formatted message here and you'll see a live preview.</textarea>
    <br>
    <button id="copy_it">Copy It!</button>
    <h3>Preview of your message</h3>
    <div id="preview" class="preview"></div>
    <h3>Preview of entire DCI message</h3>
    <div id="full_preview" class="preview"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
    <script>
      var preambleText = "" +
"*We may be anonymous strangers on the internet, but we have one thing in common. We may be a world apart, but we're here together!*\n" +
"\n" +
"**Welcome to the 24 hour pledge!**\n" +
"\n" +
"I'm pledging myself to not drinking today, and invite you to do the same.\n" +
"\n" +
"Maybe you're new to /r/stopdrinking and have a hard time deciding what to do next. Maybe you're like me and feel you need a daily commitment or maybe you've been sober for a long time and want to inspire others.\n" +
"\n" +
"It doesn't matter if you're still hung over from a three day bender or been sober for years, if you just woke up or have already completed a sober day. For the next 24 hours, lets not drink alcohol!\n" +
"\n" +
"---\n" +
"\n" +
"**This pledge is a statement of intent.** Today we don't set out *trying* not to drink, we make a conscious decision *not to drink*. It sounds simple, but all of us know it can be hard and sometimes impossible. The group can support and inspire us, yet only one person can decide if we drink today. Give that person the right mindset!\n" +
"\n" +
"What happens if we can't keep to our pledge? We give up or try again. And since we're here in /r/stopdrinking, we're not ready to give up.\n" +
"\n" +
"**What this is:** A simple thread where we commit to not drinking alcohol for the next 24 hours, posting to show others that they're not alone and making a pledge to ourselves. Anybody can join and participate at any time, you do not have to be a regular at /r/stopdrinking or have followed the pledges from the beginning.\n" +
"\n" +
"**What this isn't:** A good place for a detailed introduction of yourself, directly seek advice or share lengthy stories. You'll get a more personal response in your own thread.\n" +
"\n" +
"---\n" +
"\n" +
"This post goes up at:\n\n" +
"- US - Night/Early Morning\n" +
"- Europe - Morning\n" +
"- Asia and Australia - Evening/Night\n" +
"\n" +
"A link to the current Daily Check-In post  can always be found near the top of the sidebar.\n" +
"\n" +
"---\n\n";
      var converter = new showdown.Converter();
      var convertIt = function() {
        var text = $("#user_text").val()
        var full_text = preambleText + text;
        $("#full_preview").html(converter.makeHtml(full_text));
        $("#preview").html(converter.makeHtml(text));
        $("#copy_it").attr('data-clipboard-text', full_text);
      }
      jQuery(document).ready(function() {
        new ClipboardJS("#copy_it");
        convertIt();
        $("#user_text").bind('input propertychange', convertIt);
      });
    </script>
  </body>
</html>
